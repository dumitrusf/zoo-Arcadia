{"version":3,"sources":["animals-filter.js"],"names":["document","addEventListener","currentPage","itemsPerPage","updateURL","params","URLSearchParams","specie","$","val","habitat","nutrition","state","name","perPage","set","newURL","window","location","pathname","toString","history","pushState","showPage","visibleAnimals","parseInt","totalPages","Math","ceil","length","hide","start","end","i","show","totalItems","$paginationNav","$paginationUl","find","remove","startPage","max","endPage","min","pageNumbers","push","type","value","separator","isActive","$prevButton","parent","forEach","page","after","activeStyle","next","off","on","e","preventDefault","getVisibleAnimals","this","data","updatePagination","toLowerCase","each","$article","articleSpecie","articleHabitat","articleNutrition","articleState","articleName","specieMatch","match","trim","indexOf","applyFilters","urlParams","search","get","getURLParams","restoreFiltersFromURL"],"mappings":"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","file":"animals-filter.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    let currentPage = 1;\r\n    let itemsPerPage = 10;\r\n\r\n    // Function to get URL parameters\r\n    function getURLParams() {\r\n        const params = new URLSearchParams(window.location.search);\r\n        return {\r\n            specie: params.get('specie') || '',\r\n            habitat: params.get('habitat') || '',\r\n            nutrition: params.get('nutrition') || '',\r\n            state: params.get('state') || '',\r\n            name: params.get('name') || '',\r\n            perPage: params.get('perPage') || '10',\r\n            page: params.get('page') || '1'\r\n        };\r\n    }\r\n\r\n    // Function to update URL with current filter values\r\n    function updateURL() {\r\n        const params = new URLSearchParams();\r\n        const specie = $('#filter-specie').val();\r\n        const habitat = $('#filter-habitat').val();\r\n        const nutrition = $('#filter-nutrition').val();\r\n        const state = $('#filter-state').val();\r\n        const name = $('#filter-name').val();\r\n        const perPage = $('#filter-per-page').val();\r\n        \r\n        if (specie) params.set('specie', specie);\r\n        if (habitat) params.set('habitat', habitat);\r\n        if (nutrition) params.set('nutrition', nutrition);\r\n        if (state) params.set('state', state);\r\n        if (name) params.set('name', name);\r\n        if (perPage && perPage !== '10') params.set('perPage', perPage);\r\n        if (currentPage > 1) params.set('page', currentPage);\r\n        \r\n        // Update URL without reloading the page\r\n        const newURL = window.location.pathname + (params.toString() ? '?' + params.toString() : '');\r\n        window.history.pushState({}, '', newURL);\r\n    }\r\n\r\n    // Function to restore filters from URL\r\n    function restoreFiltersFromURL() {\r\n        const urlParams = getURLParams();\r\n        \r\n        if (urlParams.specie) $('#filter-specie').val(urlParams.specie);\r\n        if (urlParams.habitat) $('#filter-habitat').val(urlParams.habitat);\r\n        if (urlParams.nutrition) $('#filter-nutrition').val(urlParams.nutrition);\r\n        if (urlParams.state) $('#filter-state').val(urlParams.state);\r\n        if (urlParams.name) $('#filter-name').val(urlParams.name);\r\n        if (urlParams.perPage) $('#filter-per-page').val(urlParams.perPage);\r\n        if (urlParams.page) currentPage = parseInt(urlParams.page) || 1;\r\n        if (urlParams.perPage) itemsPerPage = parseInt(urlParams.perPage) || 10;\r\n    }\r\n\r\n    function applyFilters() {\r\n        const specie = $('#filter-specie').val().toLowerCase();\r\n        const habitat = $('#filter-habitat').val().toLowerCase();\r\n        const nutrition = $('#filter-nutrition').val().toLowerCase();\r\n        const state = $('#filter-state').val().toLowerCase();\r\n        const name = $('#filter-name').val().toLowerCase();\r\n\r\n        const visibleAnimals = [];\r\n\r\n        $('.intro__animal').each(function() {\r\n            const $article = $(this);\r\n            const articleSpecie = $article.data('specie') || '';\r\n            const articleHabitat = $article.data('habitat') || '';\r\n            const articleNutrition = $article.data('nutrition') || '';\r\n            const articleState = $article.data('state') || '';\r\n            const articleName = $article.data('name') || '';\r\n\r\n            let show = true;\r\n\r\n            // Filter by specie (extract value from parentheses and compare)\r\n            if (specie) {\r\n                const specieMatch = articleSpecie.match(/\\(([^)]+)\\)/);\r\n                const articleSpecieType = specieMatch ? specieMatch[1].toLowerCase().trim() : '';\r\n                if (articleSpecieType !== specie.toLowerCase()) {\r\n                    show = false;\r\n                }\r\n            }\r\n\r\n            // Filter by habitat\r\n            if (show && habitat && articleHabitat.toLowerCase().indexOf(habitat) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Filter by nutrition\r\n            if (show && nutrition && articleNutrition.indexOf(nutrition) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Filter by state (exact match)\r\n            if (show && state && articleState.toLowerCase() !== state.toLowerCase()) {\r\n                show = false;\r\n            }\r\n\r\n            // Filter by name\r\n            if (show && name && articleName.indexOf(name) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Store visible animals\r\n            if (show) {\r\n                visibleAnimals.push($article);\r\n            }\r\n            \r\n            // Hide all first\r\n            $article.hide();\r\n        });\r\n\r\n        // Apply pagination to visible animals\r\n        currentPage = 1; // Reset to first page when filtering\r\n        showPage(visibleAnimals);\r\n        \r\n        // Update URL with current filters\r\n        updateURL();\r\n        \r\n        return visibleAnimals;\r\n    }\r\n\r\n    function showPage(visibleAnimals) {\r\n        itemsPerPage = parseInt($('#filter-per-page').val()) || 10;\r\n        const totalPages = Math.ceil(visibleAnimals.length / itemsPerPage);\r\n        \r\n        // Hide all animals\r\n        $('.intro__animal').hide();\r\n        \r\n        // Show animals for current page\r\n        const start = (currentPage - 1) * itemsPerPage;\r\n        const end = start + itemsPerPage;\r\n        \r\n        for (let i = start; i < end && i < visibleAnimals.length; i++) {\r\n            visibleAnimals[i].show();\r\n        }\r\n        \r\n        // Update pagination\r\n        updatePagination(totalPages, visibleAnimals.length);\r\n    }\r\n\r\n    function updatePagination(totalPages, totalItems) {\r\n        const $paginationNav = $('#paginationNav');\r\n        const $paginationNumbers = $('#paginationNumbers');\r\n        \r\n        if (totalPages <= 1) {\r\n            $paginationNav.hide();\r\n            return;\r\n        }\r\n        \r\n        $paginationNav.show();\r\n        const $paginationUl = $paginationNav.find('.nav-pagination__ul');\r\n        \r\n        // Remove existing page numbers (keep prev and next buttons)\r\n        $paginationUl.find('li:not(:first-child):not(:last-child)').remove();\r\n        \r\n        // Generate dynamic page numbers: show current page Â± 1, plus first and last if needed\r\n        const startPage = Math.max(1, currentPage - 1);\r\n        const endPage = Math.min(totalPages, currentPage + 1);\r\n        \r\n        // Build page numbers array\r\n        const pageNumbers = [];\r\n        \r\n        // Always show first page if not in range\r\n        if (startPage > 1) {\r\n            pageNumbers.push({type: 'number', value: 1, separator: ','});\r\n            if (startPage > 2) {\r\n                pageNumbers.push({type: 'ellipsis'});\r\n            }\r\n        }\r\n        \r\n        // Show pages around current page\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            const separator = (i < endPage || (endPage < totalPages)) ? ',' : '';\r\n            pageNumbers.push({type: 'number', value: i, separator: separator, isActive: i === currentPage});\r\n        }\r\n        \r\n        // Show last page if not in range\r\n        if (endPage < totalPages) {\r\n            if (endPage < totalPages - 1) {\r\n                pageNumbers.push({type: 'ellipsis'});\r\n            }\r\n            pageNumbers.push({type: 'number', value: totalPages, separator: ''});\r\n        }\r\n        \r\n        // Insert page numbers after prev button\r\n        let $prevButton = $paginationUl.find('#paginationPrev').parent();\r\n        pageNumbers.forEach(function(page) {\r\n            if (page.type === 'ellipsis') {\r\n                $prevButton.after('<li class=\"nav-pagination__li\"><span>...</span></li>');\r\n            } else {\r\n                const activeStyle = page.isActive ? ' style=\"color: #2ED6FF; font-weight: bold;\"' : '';\r\n                $prevButton.after('<li class=\"nav-pagination__li\"><a href=\"#\" data-page=\"' + page.value + '\"' + activeStyle + '>' + page.value + page.separator + '</a></li>');\r\n            }\r\n            $prevButton = $prevButton.next();\r\n        });\r\n        \r\n        // Previous button\r\n        $('#paginationPrev').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            if (currentPage > 1) {\r\n                currentPage--;\r\n                const visibleAnimals = getVisibleAnimals();\r\n                showPage(visibleAnimals);\r\n                updateURL(); // Update URL when page changes\r\n            }\r\n        });\r\n        \r\n        // Next button\r\n        $('#paginationNext').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            if (currentPage < totalPages) {\r\n                currentPage++;\r\n                const visibleAnimals = getVisibleAnimals();\r\n                showPage(visibleAnimals);\r\n                updateURL(); // Update URL when page changes\r\n            }\r\n        });\r\n        \r\n        // Page number clicks\r\n        $paginationUl.find('a[data-page]').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            currentPage = parseInt($(this).data('page'));\r\n            const visibleAnimals = getVisibleAnimals();\r\n            showPage(visibleAnimals);\r\n            updateURL(); // Update URL when page changes\r\n        });\r\n    }\r\n\r\n    function getVisibleAnimals() {\r\n        const visibleAnimals = [];\r\n        const specie = $('#filter-specie').val().toLowerCase();\r\n        const habitat = $('#filter-habitat').val().toLowerCase();\r\n        const nutrition = $('#filter-nutrition').val().toLowerCase();\r\n        const state = $('#filter-state').val().toLowerCase();\r\n        const name = $('#filter-name').val().toLowerCase();\r\n        \r\n        $('.intro__animal').each(function() {\r\n            // Check if it should be visible based on filters\r\n            const $article = $(this);\r\n            const articleSpecie = $article.data('specie') || '';\r\n            const articleHabitat = $article.data('habitat') || '';\r\n            const articleNutrition = $article.data('nutrition') || '';\r\n            const articleState = $article.data('state') || '';\r\n            const articleName = $article.data('name') || '';\r\n            \r\n            let show = true;\r\n            \r\n            if (specie) {\r\n                const specieMatch = articleSpecie.match(/\\(([^)]+)\\)/);\r\n                const articleSpecieType = specieMatch ? specieMatch[1].toLowerCase().trim() : '';\r\n                if (articleSpecieType !== specie.toLowerCase()) show = false;\r\n            }\r\n            if (show && habitat && articleHabitat.toLowerCase().indexOf(habitat) === -1) show = false;\r\n            if (show && nutrition && articleNutrition.indexOf(nutrition) === -1) show = false;\r\n            if (show && state && articleState.toLowerCase() !== state.toLowerCase()) show = false;\r\n            if (show && name && articleName.indexOf(name) === -1) show = false;\r\n            \r\n            if (show) {\r\n                visibleAnimals.push($article);\r\n            }\r\n        });\r\n        \r\n        return visibleAnimals;\r\n    }\r\n\r\n    // Apply filters on change\r\n    $('#filter-specie, #filter-habitat, #filter-nutrition, #filter-state, #filter-name').on('change keyup', function() {\r\n        applyFilters();\r\n    });\r\n\r\n    // Items per page change\r\n    $('#filter-per-page').on('change', function() {\r\n        currentPage = 1;\r\n        itemsPerPage = parseInt($(this).val()) || 10;\r\n        const visibleAnimals = getVisibleAnimals();\r\n        showPage(visibleAnimals);\r\n        updateURL(); // Update URL when items per page changes\r\n    });\r\n\r\n    // Reset filters\r\n    $('#resetFilters').on('click', function() {\r\n        $('#filter-specie, #filter-habitat, #filter-nutrition, #filter-state, #filter-name').val('');\r\n        $('#filter-per-page').val('10');\r\n        currentPage = 1;\r\n        itemsPerPage = 10;\r\n        $('.intro__animal').show();\r\n        const visibleAnimals = getVisibleAnimals();\r\n        showPage(visibleAnimals);\r\n        // Clear URL parameters on reset\r\n        window.history.pushState({}, '', window.location.pathname);\r\n    });\r\n\r\n    // Restore filters from URL on page load\r\n    restoreFiltersFromURL();\r\n\r\n    // Initialize pagination on load\r\n    const visibleAnimals = getVisibleAnimals();\r\n    showPage(visibleAnimals);\r\n});\r\n\r\n"]}