{"version":3,"sources":["habitat-filter.js"],"names":["document","addEventListener","currentPage","itemsPerPage","showPage","visibleAnimals","parseInt","$","val","totalPages","Math","ceil","length","hide","start","end","i","show","totalItems","$paginationNav","$paginationUl","find","remove","startPage","max","endPage","min","pageNumbers","push","type","value","separator","isActive","$prevButton","parent","forEach","page","after","activeStyle","next","off","on","e","preventDefault","getVisibleAnimals","this","data","updatePagination","specie","toLowerCase","nutrition","state","name","each","$article","articleSpecie","articleNutrition","articleState","articleName","specieMatch","match","trim","indexOf","applyFilters"],"mappings":"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","file":"habitat-filter.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function() {\r\n    let currentPage = 1;\r\n    let itemsPerPage = 10;\r\n\r\n    function applyFilters() {\r\n        const specie = $('#filter-specie').val().toLowerCase();\r\n        const nutrition = $('#filter-nutrition').val().toLowerCase();\r\n        const state = $('#filter-state').val().toLowerCase();\r\n        const name = $('#filter-name').val().toLowerCase();\r\n\r\n        const visibleAnimals = [];\r\n\r\n        $('.intro__animal').each(function() {\r\n            const $article = $(this);\r\n            const articleSpecie = $article.data('specie') || '';\r\n            const articleNutrition = $article.data('nutrition') || '';\r\n            const articleState = $article.data('state') || '';\r\n            const articleName = $article.data('name') || '';\r\n\r\n            let show = true;\r\n\r\n            // Filter by specie (extract value from parentheses and compare)\r\n            if (specie) {\r\n                const specieMatch = articleSpecie.match(/\\(([^)]+)\\)/);\r\n                const articleSpecieType = specieMatch ? specieMatch[1].toLowerCase().trim() : '';\r\n                if (articleSpecieType !== specie.toLowerCase()) {\r\n                    show = false;\r\n                }\r\n            }\r\n\r\n            // Filter by nutrition\r\n            if (show && nutrition && articleNutrition.indexOf(nutrition) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Filter by state\r\n            if (show && state && articleState.indexOf(state) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Filter by name\r\n            if (show && name && articleName.indexOf(name) === -1) {\r\n                show = false;\r\n            }\r\n\r\n            // Store visible animals\r\n            if (show) {\r\n                visibleAnimals.push($article);\r\n            }\r\n            \r\n            // Hide all first\r\n            $article.hide();\r\n        });\r\n\r\n        // Apply pagination to visible animals\r\n        currentPage = 1; // Reset to first page when filtering\r\n        showPage(visibleAnimals);\r\n        \r\n        return visibleAnimals;\r\n    }\r\n\r\n    function showPage(visibleAnimals) {\r\n        itemsPerPage = parseInt($('#filter-per-page').val()) || 10;\r\n        const totalPages = Math.ceil(visibleAnimals.length / itemsPerPage);\r\n        \r\n        // Hide all animals\r\n        $('.intro__animal').hide();\r\n        \r\n        // Show animals for current page\r\n        const start = (currentPage - 1) * itemsPerPage;\r\n        const end = start + itemsPerPage;\r\n        \r\n        for (let i = start; i < end && i < visibleAnimals.length; i++) {\r\n            visibleAnimals[i].show();\r\n        }\r\n        \r\n        // Update pagination\r\n        updatePagination(totalPages, visibleAnimals.length);\r\n    }\r\n\r\n    function updatePagination(totalPages, totalItems) {\r\n        const $paginationNav = $('#paginationNav');\r\n        const $paginationNumbers = $('#paginationNumbers');\r\n        \r\n        if (totalPages <= 1) {\r\n            $paginationNav.hide();\r\n            return;\r\n        }\r\n        \r\n        $paginationNav.show();\r\n        const $paginationUl = $paginationNav.find('.nav-pagination__ul');\r\n        \r\n        // Remove existing page numbers (keep prev and next buttons)\r\n        $paginationUl.find('li:not(:first-child):not(:last-child)').remove();\r\n        \r\n        // Generate dynamic page numbers: show current page Â± 1, plus first and last if needed\r\n        const startPage = Math.max(1, currentPage - 1);\r\n        const endPage = Math.min(totalPages, currentPage + 1);\r\n        \r\n        // Build page numbers array\r\n        const pageNumbers = [];\r\n        \r\n        // Always show first page if not in range\r\n        if (startPage > 1) {\r\n            pageNumbers.push({type: 'number', value: 1, separator: ','});\r\n            if (startPage > 2) {\r\n                pageNumbers.push({type: 'ellipsis'});\r\n            }\r\n        }\r\n        \r\n        // Show pages around current page\r\n        for (let i = startPage; i <= endPage; i++) {\r\n            const separator = (i < endPage || (endPage < totalPages)) ? ',' : '';\r\n            pageNumbers.push({type: 'number', value: i, separator: separator, isActive: i === currentPage});\r\n        }\r\n        \r\n        // Show last page if not in range\r\n        if (endPage < totalPages) {\r\n            if (endPage < totalPages - 1) {\r\n                pageNumbers.push({type: 'ellipsis'});\r\n            }\r\n            pageNumbers.push({type: 'number', value: totalPages, separator: ''});\r\n        }\r\n        \r\n        // Insert page numbers after prev button\r\n        let $prevButton = $paginationUl.find('#paginationPrev').parent();\r\n        pageNumbers.forEach(function(page) {\r\n            if (page.type === 'ellipsis') {\r\n                $prevButton.after('<li class=\"nav-pagination__li\"><span>...</span></li>');\r\n            } else {\r\n                const activeStyle = page.isActive ? ' style=\"color: #2ED6FF; font-weight: bold;\"' : '';\r\n                $prevButton.after('<li class=\"nav-pagination__li\"><a href=\"#\" data-page=\"' + page.value + '\"' + activeStyle + '>' + page.value + page.separator + '</a></li>');\r\n            }\r\n            $prevButton = $prevButton.next();\r\n        });\r\n        \r\n        // Previous button\r\n        $('#paginationPrev').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            if (currentPage > 1) {\r\n                currentPage--;\r\n                const visibleAnimals = getVisibleAnimals();\r\n                showPage(visibleAnimals);\r\n            }\r\n        });\r\n        \r\n        // Next button\r\n        $('#paginationNext').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            if (currentPage < totalPages) {\r\n                currentPage++;\r\n                const visibleAnimals = getVisibleAnimals();\r\n                showPage(visibleAnimals);\r\n            }\r\n        });\r\n        \r\n        // Page number clicks\r\n        $paginationUl.find('a[data-page]').off('click').on('click', function(e) {\r\n            e.preventDefault();\r\n            currentPage = parseInt($(this).data('page'));\r\n            const visibleAnimals = getVisibleAnimals();\r\n            showPage(visibleAnimals);\r\n        });\r\n    }\r\n\r\n    function getVisibleAnimals() {\r\n        const visibleAnimals = [];\r\n        const specie = $('#filter-specie').val().toLowerCase();\r\n        const nutrition = $('#filter-nutrition').val().toLowerCase();\r\n        const state = $('#filter-state').val().toLowerCase();\r\n        const name = $('#filter-name').val().toLowerCase();\r\n        \r\n        $('.intro__animal').each(function() {\r\n            // Check if it should be visible based on filters\r\n            const $article = $(this);\r\n            const articleSpecie = $article.data('specie') || '';\r\n            const articleNutrition = $article.data('nutrition') || '';\r\n            const articleState = $article.data('state') || '';\r\n            const articleName = $article.data('name') || '';\r\n            \r\n            let show = true;\r\n            \r\n            if (specie) {\r\n                const specieMatch = articleSpecie.match(/\\(([^)]+)\\)/);\r\n                const articleSpecieType = specieMatch ? specieMatch[1].toLowerCase().trim() : '';\r\n                if (articleSpecieType !== specie.toLowerCase()) show = false;\r\n            }\r\n            if (show && nutrition && articleNutrition.indexOf(nutrition) === -1) show = false;\r\n            if (show && state && articleState.indexOf(state) === -1) show = false;\r\n            if (show && name && articleName.indexOf(name) === -1) show = false;\r\n            \r\n            if (show) {\r\n                visibleAnimals.push($article);\r\n            }\r\n        });\r\n        \r\n        return visibleAnimals;\r\n    }\r\n\r\n    // Apply filters on change\r\n    $('#filter-specie, #filter-nutrition, #filter-state, #filter-name').on('change keyup', function() {\r\n        applyFilters();\r\n    });\r\n\r\n    // Items per page change\r\n    $('#filter-per-page').on('change', function() {\r\n        currentPage = 1;\r\n        const visibleAnimals = getVisibleAnimals();\r\n        showPage(visibleAnimals);\r\n    });\r\n\r\n    // Reset filters\r\n    $('#resetFilters').on('click', function() {\r\n        $('#filter-specie, #filter-nutrition, #filter-state, #filter-name').val('');\r\n        $('#filter-per-page').val('10');\r\n        currentPage = 1;\r\n        itemsPerPage = 10;\r\n        $('.intro__animal').show();\r\n        const visibleAnimals = getVisibleAnimals();\r\n        showPage(visibleAnimals);\r\n    });\r\n\r\n    // Initialize pagination on load\r\n    const visibleAnimals = getVisibleAnimals();\r\n    showPage(visibleAnimals);\r\n});"]}